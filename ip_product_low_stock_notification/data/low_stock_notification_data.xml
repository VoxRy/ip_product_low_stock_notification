<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data noupdate="1">
    <record id="ir_cron_low_stock_notification" model="ir.cron">
      <field name="name">Low Stock Notification</field>
      <field name="model_id" ref="stock.model_stock_quant"/>
      <field name="state">code</field>
      <field name="code"><![CDATA[
# Şirket bağımlılığını kaldır: doğrudan lokasyon bul
default_loc = env.ref('stock.stock_location_stock', raise_if_not_found=False)
location_id = default_loc.id if default_loc else env['stock.location'].sudo().search(
    [('usage', '=', 'internal')],
    limit=1
).id

model.with_context(
    location=location_id,
    company_owned=True
).send_low_stock_notification()
      ]]></field>
      <field name="interval_number">24</field>
      <field name="interval_type">hours</field>
      <field name="numbercall">-1</field>
      <field name="active">True</field>
    </record>
  </data>
</odoo>
